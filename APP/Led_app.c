#include "led_app.h"


uint8_t ucLed[6] = {0,1,0,1,0,1};  // LED ?????? (6??LED)

/**
 * @brief ????ucLed??????????6??LED?????
 * @param ucLed Led??????????? (??§³?6)
 */
void led_disp(uint8_t *ucLed)
{
    uint8_t temp = 0x00;                // ????????? LED ??????????? (???6¦Ë??§¹)
    static uint8_t temp_old = 0xff;     // ????? LED ???????, ?????§Ø??????????????

    for (int i = 0; i < 6; i++)         // ????6??LED????
    {
        // ??LED???????temp?????§µ???????????
        if (ucLed[i]) temp |= (1 << i); // ???ucLed[i]?1, ??temp???i¦Ë??1
    }

    // ???????????????????????????????
    if (temp != temp_old)
    {
        // ???HAL????????temp??????????????? (???????????)
        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_6, (temp & 0x01) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 0 (PB12)
        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_7, (temp & 0x02) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 1 (PB13)
        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_8, (temp & 0x04) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 2 (PB14)
        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_9, (temp & 0x08) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 3 (PB15)
        HAL_GPIO_WritePin(GPIOE, GPIO_PIN_0,  (temp & 0x10) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 4 (PD8)
        HAL_GPIO_WritePin(GPIOE, GPIO_PIN_1,  (temp & 0x20) ? GPIO_PIN_SET : GPIO_PIN_RESET); // LED 5 (PD9)

        temp_old = temp;                // ???????????
    }
}

/**
 * @brief LED ??????????? (?????????)
 */
void led_task(void)
{
    led_disp(ucLed);                    // ????led_disp????????LED??
}






                
